before_script:
- apt-get update -y
- apt-get install apt-transport-https -y
# Install SBT
- echo "deb http://dl.bintray.com/sbt/debian /" | tee -a /etc/apt/sources.list.d/sbt.list
- apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 642AC823
- apt-get update -y
- apt-get install sbt -y
- sbt sbt-version

stages:
- stylecheck
- test

check style and formatting:
  stage: stylecheck
  script:
  # Ensure that the pipeline fails fast if there are issues with the
  # style or formatting
  - sbt clean scalafmt
  - git diff --exit-code || (echo "ERROR Code formatting check failed, see differences above."; false)

run test suites:
  stage: test
  script:
  - sbt test